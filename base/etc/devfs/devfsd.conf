# Sample /etc/devfsd.conf configuration file.
# Richard Gooch  <rgooch@atnf.csiro.au>		17-FEB-2002

# ignore lookups for "*" so that "ls -l /dev/*" does not cause modprobe to run
LOOKUP		\*		IGNORE

# Include the compatibility symlinks
OPTIONAL_INCLUDE	/etc/devfs/compat_symlinks

# Include the standard permissions settings for devices
INCLUDE			/etc/devfs/perms

# Include package-generated files from /etc/devfs/conf.d
OPTIONAL_INCLUDE	/etc/devfs/conf.d

# Enable module autoloading. You may comment this out if you don't use
# autoloading.  NB It's after the conf.d line so that packages can insert
# ignore lines if necessary
LOOKUP		.*		MODLOAD

# Set the group to tty on pseudo-tty devices. This is necessary so that mesg(1)
# can later be used to enable/disable talk requests and wall(1) messages.
REGISTER	^pty/s.*	PERMISSIONS	-1.tty	0620
REGISTER	^pts/.*		PERMISSIONS	-1.tty	0620

#
# Uncomment this if you want permissions to be saved and restored
# Do not do this for pseudo-terminal devices
#REGISTER	^pt[sy]		IGNORE
#CREATE		^pt[sy]		IGNORE
#CHANGE		^pt[sy]		IGNORE
#DELETE		^pt[sy]		IGNORE
#REGISTER	.*		COPY	/dev-state/$devname $devpath
#CREATE		.*		COPY	$devpath /dev-state/$devname
#CHANGE		.*		COPY	$devpath /dev-state/$devname
#DELETE		.*		CFUNCTION GLOBAL unlink /dev-state/$devname
#RESTORE		/dev-state

# The following line is needed to save permissions from the perms file to the
# dev-state directory when the device is loaded for the first time, and then
# use the saved permissions afterwards.
# Don't use it if you don't use the perms file.
#REGISTER	.*		COPY	$devpath /dev-state/$devname

#
# create the old /dev/cdrom symlink
REGISTER	^cdroms/cdrom0$ CFUNCTION GLOBAL symlink $devname cdrom
UNREGISTER	^cdroms/cdrom0$ CFUNCTION GLOBAL unlink cdrom

# Uncomment this to let PAM manage devfs
#REGISTER	.*		CFUNCTION /lib/security/pam_console_apply_devfsd.so pam_console_apply_single $devpath

# Uncomment this to manage USB mouse
#REGISTER	^input/mouse0$	CFUNCTION GLOBAL mksymlink $devname usbmouse
#UNREGISTER	^input/mouse0$	CFUNCTION GLOBAL unlink usbmouse
REGISTER	^input/mice$	CFUNCTION GLOBAL mksymlink $devname usbmouse
UNREGISTER	^input/mice$	CFUNCTION GLOBAL unlink usbmouse

# If you have removable media and want to force media revalidation when looking
# up new or old compatibility names, uncomment the following lines
# SCSI NEWCOMPAT  /dev/sd/* names
#LOOKUP		^(sd/c[0-9]+b[0-9]+t[0-9]+u[0-9]+)p[0-9]+$	EXECUTE /bin/dd if=$mntpnt/\1 of=/dev/null count=1
# SCSI OLDCOMPAT  /dev/sd?? names
#LOOKUP		^(sd[a-z]+)[0-9]+$	EXECUTE /bin/dd if=$mntpnt/\1 of=/dev/null count=1
# IDE NEWCOMPAT   /dev/ide/hd/* names
#LOOKUP		^(ide/hd/c[0-9]+b[0-9]+t[0-9]+u[0-9]+)p[0-9]+$	EXECUTE /bin/dd if=$mntpnt/\1 of=/dev/null count=1
# IDE OLDCOMPAT   /dev/hd?? names
#LOOKUP		^(hd[a-z])[0-9]+$	EXECUTE /bin/dd if=$mntpnt/\1 of=/dev/null count=1
